<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Membership Details</title>
    <style>
        .membership-option {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>You are currently subscribed to {{ user_profile.membership.name }}</h1>

    <div class="membership-option" id="bronze">
        <h2>Bronze</h2>
        <button type="button" id="bronze-button" onclick="selectMembership('bronze')">Subscribe</button>
    </div>
    <div class="membership-option" id="silver">
        <h2>Silver</h2>
        <button type="button" id="silver-button" onclick="selectMembership('silver')">Subscribe</button>
    </div>
    <div class="membership-option" id="gold">
        <h2>Gold</h2>
        <button type="button" id="gold-button" onclick="selectMembership('gold')">Subscribe</button>
    </div>

    <form method="post" id="membership-form">
        {% csrf_token %}
        <input type="hidden" id="selected-membership" name="selected_membership">
        <button type="submit" style="display:none">Submit</button>
    </form>

    {% if selected_membership is not null and user_profile.membership.name != selected_membership %}
        <div>
            {% include 'payment.html' with user=user_profile %}
        </div>
    {% endif %}
</body>
<script>
    function selectMembership(membershipType) {
        document.getElementById('selected-membership').value = membershipType;
        document.getElementById('membership-form').submit();
    }

    window.onload = function() {
        let currentMembership = "{{ user_profile.membership.name }}";
        if (currentMembership) {
            document.getElementById(currentMembership + '-button').disabled = true;
        }
    }
</script>
</html>
